{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/flair/Git-projects/crappylife-frontend/src/app/articles/%5Bslug%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport Image from \"next/image\";\n\ninterface Article {\n  id: number;\n  title: string;\n  slug: string;\n  cover_image?: string;\n  content?: string;\n  category?: { name: string; slug: string };\n  author?: { username: string };\n  published_at?: string;\n}\n\nfunction getImageUrl(path: string | undefined): string {\n  if (!path) return \"/default.jpg\";\n\n  // Already a full URL (Cloudinary or others)\n  if (path.startsWith(\"http\")) return path;\n\n  // Handle Cloudinary paths like \"image/upload/articles/30gold.webp\"\n  if (path.startsWith(\"image/\")) {\n    return `https://res.cloudinary.com/dvksqgurb/${path}`;\n  }\n\n  // Handle backend-served paths like \"/media/articles/...\"\n  return `${process.env.NEXT_PUBLIC_API_URL}${path.startsWith(\"/\") ? \"\" : \"/\"}${path}`;\n}\n\n\n\n\n\nexport default function ArticleDetailPage() {\n  const params = useParams();\n  const slug = params.slug as string;\n\n  const [article, setArticle] = useState<Article | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchArticle() {\n      try {\n        const res = await fetch(\n          `${process.env.NEXT_PUBLIC_API_URL}/api/articles/articles/${slug}/`\n        );\n        if (!res.ok) throw new Error(\"Article not found\");\n        const data = await res.json();\n        setArticle(data);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    if (slug) fetchArticle();\n  }, [slug]);\n\n  if (loading) return <p className=\"text-center mt-10\">Loading...</p>;\n  if (!article) return <p className=\"text-center mt-10\">Article not found.</p>;\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-4\">{article.title}</h1>\n\n      {article.category && (\n        <p className=\"text-sm text-gray-500 mb-2\">\n          Category:{\" \"}\n          <span className=\"font-medium\">{article.category.name}</span>\n        </p>\n      )}\n\n      {article.author && (\n        <p className=\"text-sm text-gray-500 mb-2\">\n          Author: <span className=\"font-medium\">{article.author.username}</span>\n        </p>\n      )}\n\n      {article.published_at && (\n        <p className=\"text-sm text-gray-500 mb-4\">\n          Published on:{\" \"}\n          {new Date(article.published_at).toLocaleDateString()}\n        </p>\n      )}\n\n      {article.cover_image && (\n        <div className=\"relative w-full h-96 mb-6\">\n          <Image\n            src={getImageUrl(article.cover_image)}\n            alt={article.title}\n            fill\n            className=\"object-cover rounded-lg\"\n            unoptimized\n          />\n        </div>\n      )}\n\n      <div className=\"prose max-w-full\">\n        <p>{article.content}</p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAiBA,SAAS,YAAY,IAAwB;IAC3C,IAAI,CAAC,MAAM,OAAO;IAElB,4CAA4C;IAC5C,IAAI,KAAK,UAAU,CAAC,SAAS,OAAO;IAEpC,mEAAmE;IACnE,IAAI,KAAK,UAAU,CAAC,WAAW;QAC7B,OAAO,CAAC,qCAAqC,EAAE,MAAM;IACvD;IAEA,yDAAyD;IACzD,OAAO,+EAAqC,KAAK,UAAU,CAAC,OAAO,KAAK,MAAM,MAAM;AACtF;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,OAAO,OAAO,IAAI;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAChB,+EAAmC,uBAAuB,EAAE,KAAK,CAAC,CAAC;gBAErE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,WAAW;YACb,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QAEA,IAAI,MAAM;IACZ,GAAG;QAAC;KAAK;IAET,IAAI,SAAS,qBAAO,8OAAC;QAAE,WAAU;kBAAoB;;;;;;IACrD,IAAI,CAAC,SAAS,qBAAO,8OAAC;QAAE,WAAU;kBAAoB;;;;;;IAEtD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA2B,QAAQ,KAAK;;;;;;YAErD,QAAQ,QAAQ,kBACf,8OAAC;gBAAE,WAAU;;oBAA6B;oBAC9B;kCACV,8OAAC;wBAAK,WAAU;kCAAe,QAAQ,QAAQ,CAAC,IAAI;;;;;;;;;;;;YAIvD,QAAQ,MAAM,kBACb,8OAAC;gBAAE,WAAU;;oBAA6B;kCAChC,8OAAC;wBAAK,WAAU;kCAAe,QAAQ,MAAM,CAAC,QAAQ;;;;;;;;;;;;YAIjE,QAAQ,YAAY,kBACnB,8OAAC;gBAAE,WAAU;;oBAA6B;oBAC1B;oBACb,IAAI,KAAK,QAAQ,YAAY,EAAE,kBAAkB;;;;;;;YAIrD,QAAQ,WAAW,kBAClB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,wIAAK;oBACJ,KAAK,YAAY,QAAQ,WAAW;oBACpC,KAAK,QAAQ,KAAK;oBAClB,IAAI;oBACJ,WAAU;oBACV,WAAW;;;;;;;;;;;0BAKjB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;8BAAG,QAAQ,OAAO;;;;;;;;;;;;;;;;;AAI3B","debugId":null}}]
}