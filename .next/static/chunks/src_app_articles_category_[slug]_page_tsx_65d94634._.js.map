{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/flair/Git-projects/crappylife-frontend/src/app/articles/category/%5Bslug%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\n\ninterface Article {\n  id: number;\n  title: string;\n  slug: string;\n  cover_image: string;\n  content?: string;\n}\n\n// âœ… helper should be declared outside or top of component\nfunction getImageUrl(path: string | undefined): string {\n  if (!path) return \"/default.jpg\"; // fallback\n\n  // Already a full URL (Cloudinary or others)\n  if (path.startsWith(\"http\")) return path;\n\n  // Handle Cloudinary short paths like \"image/upload/v1759603953/xyz.webp\"\n  if (path.startsWith(\"image/\")) {\n    return `https://res.cloudinary.com/dvksqgurb/${path}`;\n  }\n\n  // Handle backend-served media paths like \"/media/articles/...\"\n  const baseUrl = process.env.NEXT_PUBLIC_API_URL?.replace(/\\/$/, \"\") || \"\";\n  const cleanPath = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${baseUrl}${cleanPath}`;\n}\n\n\nexport default function CategoryArticlesPage() {\n  const params = useParams();\n  const slug = params.slug as string;\n  const [articles, setArticles] = useState<Article[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchArticles() {\n      try {\n        const res = await fetch(\n          `${process.env.NEXT_PUBLIC_API_URL}/api/articles/articles/by-category/${slug}/`\n        );\n        if (!res.ok) throw new Error(\"Failed to fetch\");\n        const data = await res.json();\n        setArticles(data);\n      } catch (err) {\n        console.error(\"Error fetching:\", err);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    if (slug) fetchArticles();\n  }, [slug]);\n\n  if (loading) return <p className=\"text-center mt-10\">Loading...</p>;\n\n  if (!articles.length)\n    return <p className=\"text-center mt-10\">No articles found for \"{slug}\".</p>;\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\n      <h1 className=\"text-2xl font-bold mb-6\">Articles in \"{slug}\"</h1>\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n        {articles.map((article) => (\n          <Link\n            key={article.id}\n            href={`/articles/${article.slug}`}\n            className=\"border rounded-lg overflow-hidden shadow hover:shadow-lg transition block\"\n          >\n            {article.cover_image && (\n              <div className=\"relative w-full h-48\">\n                <Image\n                  src={getImageUrl(article.cover_image)}\n                  alt={article.title}\n                  fill\n                  className=\"object-cover rounded-lg\"\n                />\n              </div>\n            )}\n            <div className=\"p-4\">\n              <h3 className=\"text-lg font-semibold\">{article.title}</h3>\n              {article.content && (\n                <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\n                  {article.content.slice(0, 50)}...\n                </p>\n              )}\n            </div>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AA4Ca;;AA1Cb;AACA;AACA;AACA;;;AALA;;;;;AAeA,0DAA0D;AAC1D,SAAS,YAAY,IAAwB;QAY3B;IAXhB,IAAI,CAAC,MAAM,OAAO,gBAAgB,WAAW;IAE7C,4CAA4C;IAC5C,IAAI,KAAK,UAAU,CAAC,SAAS,OAAO;IAEpC,yEAAyE;IACzE,IAAI,KAAK,UAAU,CAAC,WAAW;QAC7B,OAAO,AAAC,wCAA4C,OAAL;IACjD;IAEA,+DAA+D;IAC/D,MAAM,UAAU,EAAA,4HAAA,uDAAA,iCAAiC,OAAO,CAAC,OAAO,QAAO;IACvE,MAAM,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,AAAC,IAAQ,OAAL;IACpD,OAAO,AAAC,GAAY,OAAV,SAAoB,OAAV;AACtB;AAGe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,OAAO,OAAO,IAAI;IACxB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;0CAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAChB,AAAC,GAAuE,oFAArC,uCAA0C,OAAL,MAAK;oBAE/E,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;oBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,YAAY;gBACd,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,mBAAmB;gBACnC,SAAU;oBACR,WAAW;gBACb;YACF;YAEA,IAAI,MAAM;QACZ;yCAAG;QAAC;KAAK;IAET,IAAI,SAAS,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IAErD,IAAI,CAAC,SAAS,MAAM,EAClB,qBAAO,6LAAC;QAAE,WAAU;;YAAoB;YAAwB;YAAK;;;;;;;IAEvE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;oBAA0B;oBAAc;oBAAK;;;;;;;0BAC3D,6LAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,wBACb,6LAAC,0KAAI;wBAEH,MAAM,AAAC,aAAyB,OAAb,QAAQ,IAAI;wBAC/B,WAAU;;4BAET,QAAQ,WAAW,kBAClB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,2IAAK;oCACJ,KAAK,YAAY,QAAQ,WAAW;oCACpC,KAAK,QAAQ,KAAK;oCAClB,IAAI;oCACJ,WAAU;;;;;;;;;;;0CAIhB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAyB,QAAQ,KAAK;;;;;;oCACnD,QAAQ,OAAO,kBACd,6LAAC;wCAAE,WAAU;;4CACV,QAAQ,OAAO,CAAC,KAAK,CAAC,GAAG;4CAAI;;;;;;;;;;;;;;uBAlB/B,QAAQ,EAAE;;;;;;;;;;;;;;;;AA2B3B;GA/DwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}