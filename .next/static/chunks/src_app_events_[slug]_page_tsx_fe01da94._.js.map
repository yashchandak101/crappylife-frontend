{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/flair/Git-projects/crappylife-frontend/src/app/events/%5Bslug%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport Image from \"next/image\";\n\ninterface Event {\n  id: number;\n  title: string;\n  slug: string;\n  image?: string;\n  description?: string;\n  date?: string;\n  location?: string;\n}\n\n// ‚úÖ Helper to build correct Cloudinary or backend URLs\nfunction getImageUrl(path: string | undefined): string {\n  if (!path) return \"/fallback-image.png\"; // fallback image\n\n  // Already a full URL (Cloudinary or external)\n  if (path.startsWith(\"http\")) return path;\n\n  // Cloudinary path like \"image/upload/v1759603953/xyz.png\"\n  if (path.startsWith(\"image/\")) {\n    return `https://res.cloudinary.com/dvksqgurb/${path}`;\n  }\n\n  // Backend-served path like \"/media/events/img.png\"\n  const baseUrl = process.env.NEXT_PUBLIC_API_URL?.replace(/\\/$/, \"\") || \"\";\n  const cleanPath = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${baseUrl}${cleanPath}`;\n}\n\nexport default function EventDetailPage() {\n  const params = useParams();\n  const slug = params.slug as string;\n  const [event, setEvent] = useState<Event | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchEvent() {\n      try {\n        const res = await fetch(\n          `${process.env.NEXT_PUBLIC_API_URL}/api/events/events/${slug}/`\n        );\n        if (!res.ok) throw new Error(\"Event not found\");\n        const data = await res.json();\n        setEvent(data);\n      } catch (err) {\n        console.error(err);\n        setEvent(null);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    if (slug) fetchEvent();\n  }, [slug]);\n\n  if (loading) return <p className=\"text-center mt-10\">Loading...</p>;\n  if (!event) return <p className=\"text-center mt-10\">Event not found.</p>;\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">{event.title}</h1>\n\n      {event.image && (\n        <div className=\"relative w-full h-96 mb-6\">\n          <Image\n            src={getImageUrl(event.image)} // ‚úÖ now uses helper\n            alt={event.title}\n            fill\n            className=\"object-cover rounded-lg shadow\"\n            unoptimized\n          />\n        </div>\n      )}\n\n      {event.description && (\n        <p className=\"text-gray-700 mb-4\">{event.description}</p>\n      )}\n\n      <div className=\"text-sm text-gray-600 space-y-2\">\n        {event.date && <p>üìÖ {new Date(event.date).toLocaleDateString()}</p>}\n        {event.location && <p>üìç {event.location}</p>}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AA4Ca;;AA1Cb;AACA;AACA;;;AAJA;;;;AAgBA,uDAAuD;AACvD,SAAS,YAAY,IAAwB;QAY3B;IAXhB,IAAI,CAAC,MAAM,OAAO,uBAAuB,iBAAiB;IAE1D,8CAA8C;IAC9C,IAAI,KAAK,UAAU,CAAC,SAAS,OAAO;IAEpC,0DAA0D;IAC1D,IAAI,KAAK,UAAU,CAAC,WAAW;QAC7B,OAAO,AAAC,wCAA4C,OAAL;IACjD;IAEA,mDAAmD;IACnD,MAAM,UAAU,EAAA,4HAAA,uDAAA,iCAAiC,OAAO,CAAC,OAAO,QAAO;IACvE,MAAM,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,AAAC,IAAQ,OAAL;IACpD,OAAO,AAAC,GAAY,OAAV,SAAoB,OAAV;AACtB;AAEe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,OAAO,OAAO,IAAI;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAe;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;qCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAChB,AAAC,GAAuD,oFAArB,uBAA0B,OAAL,MAAK;oBAE/D,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;oBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,SAAS;gBACX,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC;oBACd,SAAS;gBACX,SAAU;oBACR,WAAW;gBACb;YACF;YAEA,IAAI,MAAM;QACZ;oCAAG;QAAC;KAAK;IAET,IAAI,SAAS,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IACrD,IAAI,CAAC,OAAO,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IAEpD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA2B,MAAM,KAAK;;;;;;YAEnD,MAAM,KAAK,kBACV,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,2IAAK;oBACJ,KAAK,YAAY,MAAM,KAAK;oBAC5B,KAAK,MAAM,KAAK;oBAChB,IAAI;oBACJ,WAAU;oBACV,WAAW;;;;;;;;;;;YAKhB,MAAM,WAAW,kBAChB,6LAAC;gBAAE,WAAU;0BAAsB,MAAM,WAAW;;;;;;0BAGtD,6LAAC;gBAAI,WAAU;;oBACZ,MAAM,IAAI,kBAAI,6LAAC;;4BAAE;4BAAI,IAAI,KAAK,MAAM,IAAI,EAAE,kBAAkB;;;;;;;oBAC5D,MAAM,QAAQ,kBAAI,6LAAC;;4BAAE;4BAAI,MAAM,QAAQ;;;;;;;;;;;;;;;;;;;AAIhD;GAvDwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}