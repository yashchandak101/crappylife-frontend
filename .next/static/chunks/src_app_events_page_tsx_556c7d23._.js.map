{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/flair/Git-projects/crappylife-frontend/src/app/events/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\n\ninterface Event {\n  id: number;\n  title: string;\n  slug: string;\n  description: string;\n  date: string;\n  location: string;\n  image: string;\n}\n\n// ‚úÖ Safely build full Cloudinary or backend image URLs\nfunction getImageUrl(path: string | undefined): string {\n  if (!path) return \"/fallback-image.png\"; // fallback\n\n  // Already full URL (Cloudinary or external)\n  if (path.startsWith(\"http\")) return path;\n\n  // Cloudinary short path e.g. \"image/upload/v1759603953/rbj3awpctadhc3ukxndi.png\"\n  if (path.startsWith(\"image/\")) {\n    return `https://res.cloudinary.com/dvksqgurb/${path}`;\n  }\n\n  // Backend-served path like \"media/events/img.png\"\n  const baseUrl = process.env.NEXT_PUBLIC_API_URL?.replace(/\\/$/, \"\") || \"\";\n  const cleanPath = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${baseUrl}${cleanPath}`;\n}\n\nexport default function EventsPage() {\n  const [events, setEvents] = useState<Event[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchEvents() {\n      try {\n        const res = await fetch(\n          `${process.env.NEXT_PUBLIC_API_URL}/api/events/events/`\n        );\n        if (!res.ok) throw new Error(\"Failed to fetch events\");\n        const data = await res.json();\n        setEvents(data);\n      } catch (err) {\n        console.error(\"‚ùå Error fetching events:\", err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchEvents();\n  }, []);\n\n  if (loading) return <p className=\"text-center mt-10\">Loading events...</p>;\n  if (!events.length) return <p className=\"text-center mt-10\">No events found.</p>;\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Upcoming Events</h1>\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n        {events.map((event) => (\n          <Link\n            key={event.id}\n            href={`/events/${event.slug}`}\n            className=\"border rounded-lg overflow-hidden shadow hover:shadow-lg transition\"\n          >\n            <div className=\"relative w-full h-60\">\n              <Image\n                src={getImageUrl(event.image)}\n                alt={event.title}\n                fill\n                className=\"object-cover\"\n                unoptimized // ‚úÖ avoid Next.js image optimizer 400 error\n              />\n            </div>\n            <div className=\"p-4\">\n              <h2 className=\"text-lg font-bold\">{event.title}</h2>\n              <p className=\"text-sm text-gray-600 mt-1 line-clamp-3\">\n                {event.description}\n              </p>\n              <p className=\"mt-2 text-sm font-medium text-gray-800\">\n                üìÖ {new Date(event.date).toLocaleDateString()} \n              </p>\n              <p className=\"mt-1 text-sm text-gray-500\">üìç {event.location}</p>\n            </div>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AA0Ca;;AAxCb;AACA;AACA;;;AAJA;;;;AAgBA,uDAAuD;AACvD,SAAS,YAAY,IAAwB;QAY3B;IAXhB,IAAI,CAAC,MAAM,OAAO,uBAAuB,WAAW;IAEpD,4CAA4C;IAC5C,IAAI,KAAK,UAAU,CAAC,SAAS,OAAO;IAEpC,iFAAiF;IACjF,IAAI,KAAK,UAAU,CAAC,WAAW;QAC7B,OAAO,AAAC,wCAA4C,OAAL;IACjD;IAEA,kDAAkD;IAClD,MAAM,UAAU,EAAA,4HAAA,uDAAA,iCAAiC,OAAO,CAAC,OAAO,QAAO;IACvE,MAAM,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,AAAC,IAAQ,OAAL;IACpD,OAAO,AAAC,GAAY,OAAV,SAAoB,OAAV;AACtB;AAEe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;gCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAChB,AAAC,GAAkC,oFAAA;oBAErC,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;oBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,UAAU;gBACZ,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,4BAA4B;gBAC5C,SAAU;oBACR,WAAW;gBACb;YACF;YACA;QACF;+BAAG,EAAE;IAEL,IAAI,SAAS,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IACrD,IAAI,CAAC,OAAO,MAAM,EAAE,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IAE5D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC,0KAAI;wBAEH,MAAM,AAAC,WAAqB,OAAX,MAAM,IAAI;wBAC3B,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,2IAAK;oCACJ,KAAK,YAAY,MAAM,KAAK;oCAC5B,KAAK,MAAM,KAAK;oCAChB,IAAI;oCACJ,WAAU;oCACV,WAAW;;;;;;;;;;;0CAGf,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAqB,MAAM,KAAK;;;;;;kDAC9C,6LAAC;wCAAE,WAAU;kDACV,MAAM,WAAW;;;;;;kDAEpB,6LAAC;wCAAE,WAAU;;4CAAyC;4CAChD,IAAI,KAAK,MAAM,IAAI,EAAE,kBAAkB;;;;;;;kDAE7C,6LAAC;wCAAE,WAAU;;4CAA6B;4CAAI,MAAM,QAAQ;;;;;;;;;;;;;;uBArBzD,MAAM,EAAE;;;;;;;;;;;;;;;;AA4BzB;GA3DwB;KAAA","debugId":null}}]
}